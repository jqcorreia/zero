external "raylib" {
    fn InitWindow(width: i32, height: i32, title: str)
    fn BeginDrawing()
    fn EndDrawing()
    fn ClearBackground(color: i32)
    fn DrawRectangle(x: i32, y: i32, w: i32, h: i32, color: i32)
    fn GetKeyPressed() -> i32
}

external "c" {
    fn printf(format: str, ...) -> i32
    fn sleep(seconds: u32)
}

struct Color {
    r: u8
    g: u8
    b: u8
    a: u8
}

fn main() {
    W := 800
    H := 600

    dir := 1

    InitWindow(W, H, "Hello Raylib")
    x: i32 = 0

    for {
        keypressed := GetKeyPressed()

        if keypressed != 0 {
            printf("Key pressed: %d\n", keypressed)
        }
        if keypressed == 256 { // escape key
            break
        }

        if dir == 1 {
            x = x + 1
        }
        if dir == 2 {
            x = x - 1
        }
        if x > W - 50 {
            dir = 2
        }
        if x < 0 {
            dir = 1
        }

        BeginDrawing()
        ClearBackground(0)
        DrawRectangle(x, H / 2 - 25, 50, 50, 4278190335)
        EndDrawing()
    }
}

